<!doctype html>
<html lang="ms">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Al-Qur'an Bertajwid & Terjemahan Melayu â€” by Zulkifli.MNA</title>
  <meta name="description" content="Laman Al-Qur'an bertajwid berwarna dan terjemahan Melayu. Baca, dengar dan pelajari tajwid dengan panduan warna dan keterangan ringkas." />
  <style>
    :root{
      --bg:#eaf6ef; /* daun muda lembut */
      --primary:#055e46;
      --card:#ffffff;
      --muted:#6b6b6b;
      --accent:#004d40;
      --maxw:980px;
    }
    html,body{height:100%;margin:0;font-family:Arial, "Noto Naskh Arabic", serif;background:var(--bg);color:#222}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:18px}
    header{background:var(--primary);color:#fff;padding:18px;border-radius:8px 8px 0 0;text-align:center}
    header h1{margin:0;font-size:22px}
    header p{margin:6px 0 0 0;font-size:14px;opacity:.95}
    .byline{font-size:13px;margin-top:6px;opacity:.9}
    .card{background:var(--card);padding:14px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,.06);margin-top:14px}
    select#surah{width:100%;padding:10px;border-radius:8px;border:1px solid #cfcfcf;font-size:16px}
    #loading{color:var(--muted);padding:12px;text-align:center}
    .ayah{background:#fff;margin:10px 0;padding:12px;border-radius:8px;border:1px solid #e6efe9}
    .arabic{direction:rtl;font-size:28px;line-height:2;text-align:right}
    .translation{font-size:17px;color:#333;margin-top:8px}
    .controls{display:flex;gap:8px;align-items:center;margin-top:10px;flex-wrap:wrap}
    button.play{background:var(--accent);color:#fff;border:0;padding:8px 12px;border-radius:6px;cursor:pointer}
    .tajwid-guide table{width:100%;border-collapse:collapse;margin-top:12px}
    .tajwid-guide th,.tajwid-guide td{padding:8px;border-bottom:1px solid #e6efe9;text-align:left}
    .tajwid-guide td.color{width:120px;font-weight:600}
    footer{margin-top:18px;padding:12px;background:#e2f3ea;border-radius:8px;color:#083a2f}
    .intro p{margin:8px 0}
    .badge{display:inline-block;padding:4px 8px;background:#fff;border-radius:16px;margin-left:8px;font-size:12px;color:var(--primary)}
    /* tajwid classes - warna */
    .tj-madd{color:#008000;font-weight:600}
    .tj-idgham{color:#ff6600;font-weight:600}
    .tj-ikhfa{color:#cc00ff;font-weight:600}
    .tj-qalqalah{color:#0000cc;font-weight:600}
    .tj-ghunnah{color:#ff0000;font-weight:600}
    .tj-ikhfa-shafawi{color:#990099;font-weight:600}
    .tj-iqlab{color:#ff9900;font-weight:600}
    .tj-idhar{color:#0099cc;font-weight:600}
    .note{font-size:13px;color:var(--muted)}
    .hadith{background:#fff8e6;padding:10px;border-radius:6px;border:1px solid #f1e0b8;margin-top:10px}
    .dua{background:#f0fff8;padding:10px;border-radius:6px;border:1px solid #d6f2e0;margin-top:10px}
    .by{font-size:12px;color:#666;margin-top:6px}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>ğŸ“– Al-Qur'an Bertajwid & Terjemahan Melayu</h1>
      <div class="byline">Interaktif â€¢ Tajwid berwarna â€¢ Audio (jika tersedia) <span class="badge">by Zulkifli.MNA</span></div>
    </header>

    <div class="card intro">
      <h3>Pengenalan singkat</h3>
      <p>Selamat datang ke laman pembelajaran Al-Qur'an ini. Laman ini direka untuk membantu bacaan Anda dengan panduan warna tajwid, terjemahan Bahasa Melayu, serta audio bacaan apabila tersedia.</p>

      <div class="hadith">
        <strong>Hadis ringkas (petikan sahih):</strong>
        <p>â€œØ®ÙÙŠÙ’Ø±ÙÙƒÙÙ…Ù’ Ù…ÙÙ†Ù’ ØªÙØ¹ÙÙ„Ù‘ÙÙ…Ù Ø§Ù„Ù’Ù‚ÙØ±Ù’Ø¢Ù†Ù ÙˆÙØ¹ÙÙ„Ù‘ÙÙ…ÙÙ‡Ùâ€ â€” <em>â€œSebaik-baik kamu ialah orang yang belajar Al-Qurâ€™an dan mengajarkannya.â€</em> (HR. Al-Bukhari)</p>
      </div>

      <div class="dua">
        <strong>Doa sebelum belajar:</strong>
        <p><em>Ø§Ù„Ù„Ù‡Ù… Ø¹Ù„Ù…Ù†Ø§ Ù…Ø§ ÙŠÙ†ÙØ¹Ù†Ø§ ÙˆØ§Ù†ÙØ¹Ù†Ø§ Ø¨Ù…Ø§ Ø¹Ù„Ù…ØªÙ†Ø§ ÙˆØ²Ø¯Ù†Ø§ Ø¹Ù„Ù…Ø§</em></p>
        <p class="by">Terjemah: "Ya Allah, ajarkanlah kami apa yang memberi manfaat, berilah manfaat kepada kami dari apa yang Engkau ajarkan, dan tambahkanlah ilmu kepada kami."</p>
      </div>
    </div>

    <div class="card">
      <label for="surah"><strong>Pilih Surah</strong></label>
      <select id="surah"></select>
      <div id="loading">Memuatkan senarai surah...</div>
      <div id="controls" class="controls" style="display:none">
        <button id="playSurah" class="play">â–¶ï¸ Mainkan audio surah</button>
        <div class="note">Jika audio tidak muncul bermakna sumber audio tidak tersedia untuk surah ini.</div>
      </div>
      <div id="quran"></div>
    </div>

    <div class="card tajwid-guide">
      <h3>ğŸ¨ Panduan Warna Hukum Tajwid</h3>
      <table>
        <tr><th>Warna</th><th>Hukum</th><th>Keterangan</th></tr>
        <tr><td class="color"><span class="tj-madd">Hijau</span></td><td>Mad</td><td>Panjangkan bacaan 2â€“6 harakat</td></tr>
        <tr><td class="color"><span class="tj-idgham">Oren</span></td><td>Idgham</td><td>Lebur bunyi huruf bila bertemu huruf tertentu</td></tr>
        <tr><td class="color"><span class="tj-ikhfa">Ungu</span></td><td>Ikhfa'</td><td>Sembunyi bacaan dengan dengung halus</td></tr>
        <tr><td class="color"><span class="tj-qalqalah">Biru</span></td><td>Qalqalah</td><td>Pantulan bunyi huruf qalqalah</td></tr>
        <tr><td class="color"><span class="tj-ghunnah">Merah</span></td><td>Ghunnah</td><td>Dengung kuat (contoh: 2 harakat)</td></tr>
        <tr><td class="color"><span class="tj-ikhfa-shafawi">Ungu Gelap</span></td><td>Ikhfa' Syafawi</td><td>Ù… bertemu Ø¨ â€” dengung khas</td></tr>
        <tr><td class="color"><span class="tj-iqlab">Kuning</span></td><td>Iqlab</td><td>Øªukar bunyi Ù† ke Ù… (contoh: sebelum Ø¨)</td></tr>
        <tr><td class="color"><span class="tj-idhar">Biru Muda</span></td><td>Idhar</td><td>Bacaan jelas tanpa dengung</td></tr>
      </table>
    </div>

    <footer>
      <div>Data Arab & Tajwid diperoleh daripada API awam; terjemahan Melayu oleh sumber awam. Gunakan laman ini untuk tujuan pembelajaran dan dakwah.</div>
    </footer>
  </div>

  <script>
  const API_QURAN = surah => `https://api.alquran.cloud/v1/surah/${surah}`;
  const API_TRANS = surah => `https://quran-api-id.vercel.app/surahs/${surah}`;

  const surahSelect = document.getElementById('surah');
  const quranDiv = document.getElementById('quran');
  const loading = document.getElementById('loading');
  const controls = document.getElementById('controls');
  const playSurah = document.getElementById('playSurah');
  let currentAudioUrl = null;

  // isi dropdown 1..114
  for (let i = 1; i <= 114; i++) {
    const opt = document.createElement('option');
    opt.value = i;
    opt.textContent = `${i}. Surah ${i}`;
    surahSelect.appendChild(opt);
  }

  async function loadSurah(n) {
    quranDiv.innerHTML = '';
    loading.style.display = 'block';
    loading.textContent = 'ğŸ“– Memuatkan surah...';
    controls.style.display = 'none';
    currentAudioUrl = null;

    try {
      // Ambil ayat Arab & terjemahan
      const [arabRes, transRes] = await Promise.all([
        fetch(API_QURAN(n)),
        fetch(API_TRANS(n))
      ]);

      const arabData = await arabRes.json();
      const transData = await transRes.json();

      // Semak data
      if (!arabData.data || !transData.ayahs) {
        loading.textContent = 'âš ï¸ Gagal memuat data. Sila cuba semula.';
        return;
      }

      loading.style.display = 'none';
      const ayahs = arabData.data.ayahs;
      const transAyahs = transData.ayahs;

      // Cuba dapatkan audio penuh surah
      if (ayahs[0]?.audioSecondary?.[0]) {
        currentAudioUrl = ayahs[0].audioSecondary[0];
        controls.style.display = 'flex';
        playSurah.onclick = () =>
          new Audio(currentAudioUrl).play().catch(e =>
            alert('Audio tidak dapat dimainkan: ' + e.message)
          );
      }

      // Papar setiap ayat
      ayahs.forEach((a, i) => {
        const ayahDiv = document.createElement('div');
        ayahDiv.className = 'ayah';

        const arabicEl = document.createElement('div');
        arabicEl.className = 'arabic';
        arabicEl.textContent = a.text;

        const transEl = document.createElement('div');
        transEl.className = 'translation';
        transEl.textContent = transAyahs[i]?.translation || '';

        ayahDiv.appendChild(arabicEl);
        ayahDiv.appendChild(transEl);
        quranDiv.appendChild(ayahDiv);
      });
    } catch (err) {
      loading.textContent = 'âš ï¸ Ralat: ' + err.message;
    }
  }

  // Muat surah pertama (Al-Fatihah)
  surahSelect.value = 1;
  loadSurah(1);

  surahSelect.addEventListener('change', e => loadSurah(e.target.value));
</script>
</body>
</html>